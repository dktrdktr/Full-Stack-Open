{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Name.js","components/Persons.js","services/names.js","components/Notification.js","App.js","index.js"],"names":["Filter","value","onChange","PersonForm","onSubmit","nameValue","nameOnChange","numberValue","numberOnChange","type","Name","person","handlePersonDelete","name","number","onClick","Persons","personsToShow","map","baseUrl","personService","getAll","axios","get","then","response","data","create","newObject","post","update","id","put","deleteEntry","delete","Notification","message","className","App","useState","persons","setPersons","setMessage","newName","setNewName","newNumber","setNewNumber","newFilter","setNewFilter","useEffect","initialPersons","namesToShow","filter","x","toLowerCase","includes","e","target","event","nameObject","preventDefault","some","result","window","confirm","matchedNameIndex","findIndex","returnedPerson","setTimeout","catch","err","error","concat","console","log","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.acc232d5.chunk.js","sourcesContent":["import React from \"react\";\n\nconst Filter = ({ value, onChange }) => {\n  return (\n    <div>\n      filter shown with:\n      <input value={value} onChange={onChange} />\n    </div>\n  );\n};\n\nexport default Filter;\n","import React from \"react\";\n\nconst PersonForm = ({\n  onSubmit,\n  nameValue,\n  nameOnChange,\n  numberValue,\n  numberOnChange,\n}) => {\n  return (\n    <form onSubmit={onSubmit}>\n      <div>\n        name: <input value={nameValue} onChange={nameOnChange} />\n        <br />\n        number: <input value={numberValue} onChange={numberOnChange} />\n        <br />\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  );\n};\n\nexport default PersonForm;\n","import React from \"react\";\n\nconst Name = ({ person, handlePersonDelete }) => {\n  return (\n    <li>\n      {person.name} {person.number}{\" \"}\n      <button onClick={() => handlePersonDelete(person)}>delete</button>\n    </li>\n  );\n};\n\nexport default Name;\n","import React from \"react\";\nimport Name from \"./Name\";\n\nconst Persons = ({ personsToShow, handlePersonDelete }) => {\n  return (\n    <ul>\n      {personsToShow.map((person) => (\n        <Name\n          key={person.name}\n          person={person}\n          handlePersonDelete={handlePersonDelete}\n        />\n      ))}\n    </ul>\n  );\n};\n\nexport default Persons;\n","import axios from \"axios\";\n// const baseUrl = \"/api/persons\";\nconst baseUrl = \"api/persons\";\n\nconst getAll = () => {\n  const request = axios.get(baseUrl);\n  return request.then((response) => response.data);\n};\n\nconst create = (newObject) => {\n  const request = axios.post(baseUrl, newObject);\n  return request.then((response) => response.data);\n};\n\nconst update = (id, newObject) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObject);\n  return request.then((response) => response.data);\n};\n\nconst deleteEntry = (id) => {\n  const request = axios.delete(`${baseUrl}/${id}`);\n  return request.then((response) => response);\n};\n\nconst personService = { getAll, create, update, deleteEntry };\n\nexport default personService;\n","const Notification = ({ message }) => {\n  if (message === null) {\n    return null;\n  }\n\n  return <div className={`notification ${message[1]}`}>{message[0]}</div>;\n};\n\nexport default Notification;\n","import React, { useState, useEffect } from \"react\";\nimport Filter from \"./components/Filter\";\nimport PersonForm from \"./components/PersonForm\";\nimport Persons from \"./components/Persons\";\nimport personService from \"./services/names\";\nimport Notification from \"./components/Notification\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [message, setMessage] = useState(null);\n  // User input\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [newFilter, setNewFilter] = useState(\"\");\n\n  // Fetch data from the server after the initial render\n  useEffect(() => {\n    personService.getAll().then((initialPersons) => {\n      setPersons(initialPersons);\n    });\n  }, []);\n\n  // Event handler for adding a new contact to the phonebook\n  const addName = (event) => {\n    const nameObject = {\n      name: newName,\n      number: newNumber,\n    };\n    event.preventDefault();\n\n    if (persons.some((x) => x.name.toLowerCase() === newName.toLowerCase())) {\n      const result = window.confirm(\n        `${newName} is already added to phonebook, replace the old number with a new one?`\n      );\n\n      let matchedNameIndex = persons.findIndex(\n        (person) => person.name.toLowerCase() === newName.toLowerCase()\n      );\n\n      if (result) {\n        personService\n          .update(persons[matchedNameIndex].id, nameObject)\n          .then((returnedPerson) => {\n            setPersons(\n              persons.map((person) =>\n                person.id === returnedPerson.id ? nameObject : person\n              )\n            );\n            setNewName(\"\");\n            setNewNumber(\"\");\n            setMessage([`Updated ${returnedPerson.name}`, \"success\"]);\n            setTimeout(() => {\n              setMessage(null);\n            }, 3000);\n          })\n          .catch((err) => {\n            setMessage([`${err.response.data.error}`, \"error\"]);\n            setTimeout(() => {\n              setMessage(null);\n            }, 3000);\n          });\n      }\n    } else {\n      personService\n        .create(nameObject)\n        .then((returnedPerson) => {\n          setPersons(persons.concat(returnedPerson));\n          setNewName(\"\");\n          setNewNumber(\"\");\n          setMessage([`Added ${returnedPerson.name}`, \"success\"]);\n          setTimeout(() => {\n            setMessage(null);\n          }, 3000);\n        })\n        .catch((error) => {\n          console.log(error);\n          console.log(error.response.data);\n          setMessage([`Error: ${error.response.data.error}`, \"error\"]);\n        });\n    }\n  };\n\n  // Event handlers for the user input\n  const handleNameChange = (e) => setNewName(e.target.value);\n  const handleNumberChange = (e) => setNewNumber(e.target.value);\n  const handleFilterChange = (e) => {\n    setNewFilter(e.target.value);\n  };\n\n  // Filter the person list based on the search query\n  const namesToShow = persons.filter((x) =>\n    x.name.toLowerCase().includes(newFilter.toLowerCase())\n  );\n\n  // Event handler for deleting an entry (called from the Name component within Persons component)\n  const handlePersonDelete = (person) => {\n    personService\n      .deleteEntry(person.id)\n      .then((response) => {\n        setPersons(persons.filter((x) => x.id !== person.id));\n        setMessage([`${person.name} has been successfully deleted`, \"success\"]);\n        setTimeout(() => {\n          setMessage(null);\n        }, 3000);\n      })\n      .catch((err) => {\n        setMessage([`${person.name} is not in the database`, \"error\"]);\n        setTimeout(() => {\n          setMessage(null);\n        }, 3000);\n      });\n  };\n\n  return (\n    <div>\n      <Notification message={message} />\n      <h2>Phonebook</h2>\n      <Filter value={newFilter} onChange={handleFilterChange} />\n      <h2>Add a new one</h2>\n      <PersonForm\n        onSubmit={addName}\n        nameValue={newName}\n        nameOnChange={handleNameChange}\n        numberValue={newNumber}\n        numberOnChange={handleNumberChange}\n      />\n      <h2>Numbers</h2>\n      <Persons\n        personsToShow={namesToShow}\n        handlePersonDelete={handlePersonDelete}\n        setMessage={setMessage}\n      />\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}